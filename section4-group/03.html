<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>순차적으로 재생하기</title>
	<style>
		.bar-container {
			display: flex;
			align-items: flex-end;
		}
		.bar {
			width: 10px;
			height: 200px;
			margin: 0 10px;
			background-color: lightgray;
			transform-origin: bottom;
			will-change: transform;
		}
		.bar:nth-child(5n+1) { background-color:crimson; }
		.bar:nth-child(5n+2) { background-color: gold; }
		.bar:nth-child(5n+3) { background-color: forestgreen; }
		.bar:nth-child(5n+4) { background-color: dodgerblue; }
		.bar:nth-child(5n+5) { background-color: darkorchid; }
	</style>
</head>
<body>
	<div class="bar-container"></div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/web-animations/2.3.2/web-animations-next.min.js"></script>
	<script>
		const barContainer = document.querySelector('.bar-container');
		const bars = [];
		let bar;

		for(let i=0 ; i<50 ; i++) {
			bar = document.createElement('div');
			bar.classList.add('bar');
			barContainer.append(bar);
			bars.push(bar);
		}

		const keyframes = [
			{ transform: 'scaleY(0)' },
			{ transform: 'scaleY(1)' }
		];

		const options = {
			duration: 500,
			// iterations: Infinity,
			direction: 'alternate',
			fill: 'both',
			easing: 'ease-in-out'
		};

		const effects = [];
		bars.forEach((bar, index) => {
			const effect = new KeyframeEffect(bar, keyframes, options);
			effects.push(effect);
		});

		const sequenceEffect = new SequenceEffect(effects);
		const animation = document.timeline.play(sequenceEffect);
	</script>
</body>
</html>